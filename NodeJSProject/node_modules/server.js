var express = require('express');
var data = require('./data-store');

var app = express();

app.get('/projects', function(req, res){
    var sortedProjects = data.getProjects().sort((a,b) => a.id - b.id);
    res.status(200).json(sortedProjects);
});

app.get('/projects/active', function(req, res){
    var activeProjects = data.getProjects().filter(p => p.isActive);
    var sortedProjects = activeProjects.sort((a,b) => a.id - b.id);
    if(sortedProjects.length>0){
        res.status(200).json(sortedProjects);
    }
    else{
        res.status(404).json({message:'no project active'});
    }
});

app.get('/projects/:id', function(req, res){
    var projectId = parseInt(req.params.id);
    var project = data.getProjects().find(p => p.id === projectId);
    if(project){
        res.status(200).json(project);
    }
    else{
        res.status(404).json({message:'No Projects hello Found'});
    }
});


app.listen(3000, function(){
    console.log('Serverz is Running port 3000');
});